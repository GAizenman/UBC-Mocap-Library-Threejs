<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
        />
        <link rel="stylesheet" href="./styles/main.css" />
    </head>
    <body>
        <!-- Import maps polyfill -->
        <!-- Remove this when import maps will be widely supported -->
        <!-- <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script> -->
        <script type="importmap">
            {
                "imports": {
                    "three": "./node_modules/three/build/three.module.js",
                    "three/addons/": "./node_modules/three/examples/jsm/"
                }
            }
        </script>
        <div class="splitter">
            <div id="first">
                <canvas id="canvas"></canvas>
                <div id="content"></div>
            </div>
            <div id="separator" ></div>
            <div id="second" >
                <div id="viewport"></div>
            </div>
        </div>
        <script>
            // A function is used for dragging and moving
            function dragElement(element, direction)
            {
                var   md; // remember mouse down info
                const first  = document.getElementById("canvas");
                const second = document.getElementById("second");
            
                element.onmousedown = onMouseDown;
            
                function onMouseDown(e)
                {
                    //console.log("mouse down: " + e.clientX);
                    md = {e,
                          offsetLeft:  element.offsetLeft,
                          offsetTop:   element.offsetTop,
                          firstWidth:  first.offsetWidth,
                          secondWidth: second.offsetWidth
                         };
            
                    document.onmousemove = onMouseMove;
                    document.onmouseup = () => {
                        //console.log("mouse up");
                        document.onmousemove = document.onmouseup = null;
                    }
                }
            
                function onMouseMove(e)
                {
                    //console.log("mouse move: " + e.clientX);
                    var delta = {x: e.clientX - md.e.clientX,
                                 y: e.clientY - md.e.clientY};
            
                    if (direction === "H" ) // Horizontal
                    {
                        // Prevent negative-sized elements
                        delta.x = Math.min(Math.max(delta.x, -md.firstWidth),
                                   md.secondWidth);
            
                        element.style.left = md.offsetLeft + delta.x + "px";
                        first.style.width = (md.firstWidth + delta.x) + "px";
                        second.style.width = (md.secondWidth - delta.x) + "px";
                    }
                }
            }
            
            
            dragElement( document.getElementById("separator"), "H" );
            
            </script>
        <script type="module" src="./index.js"></script>
        
    </body>
</html>
